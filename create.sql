create table address (created_at timestamp(6), updated_at timestamp(6), establishment_id uuid, id uuid not null, user_id uuid, city varchar(255), complement varchar(255), neighborhood varchar(255), number varchar(255), postal_code varchar(255), state varchar(255), street varchar(255), primary key (id));
create table categories (created_at timestamp(6), updated_at timestamp(6), establishment_id uuid, id uuid not null, name varchar(255), primary key (id));
create table establishments (average_order_value integer, created_at timestamp(6), updated_at timestamp(6), id uuid not null, cnpj varchar(255), fantasy_name varchar(255), primary key (id));
create table events (already_happened boolean, date date, price float(53), created_at timestamp(6), updated_at timestamp(6), id uuid not null, owner_id uuid, description varchar(255), title varchar(255), primary key (id));
create table informations (close_at time(6), has_accessibility boolean, has_parking boolean, has_tv boolean, has_wifi boolean, open_at time(6), created_at timestamp(6), updated_at timestamp(6), establishment_id uuid, id uuid not null, facebook_url varchar(255), instagram_url varchar(255), phone varchar(255), telegram_url varchar(255), primary key (id));
create table relationships (interaction_type tinyint not null check (interaction_type between 0 and 3), rate float(53), created_at timestamp(6), updated_at timestamp(6), establishment_id uuid not null, user_id uuid not null, message varchar(255), primary key (interaction_type, establishment_id, user_id));
create table users (created_at timestamp(6), updated_at timestamp(6), id uuid not null, email varchar(255), name varchar(255), password varchar(255), role_enum varchar(255) check (role_enum in ('ADMIN','EMPLOYEE','USER')), user_type_enum varchar(255) check (user_type_enum in ('COMMON','EMPLOYEE')), primary key (id));
alter table if exists address add constraint FKaeugg6r73auwl6u13qp2rhg7e foreign key (establishment_id) references establishments;
alter table if exists address add constraint FK6i66ijb8twgcqtetl8eeeed6v foreign key (user_id) references users;
alter table if exists categories add constraint FKp0yjvcbi90bbdrjsjlvbx1lei foreign key (establishment_id) references establishments;
alter table if exists events add constraint FK7d5oq323njkxkmn3s5c7qkpe5 foreign key (owner_id) references establishments;
alter table if exists informations add constraint FKqwqlhuouqseke6da7idfw6h2o foreign key (establishment_id) references establishments;
INSERT INTO users(created_at, updated_at, id, email, name, password, role_enum, user_type_enum) VALUES (NOW(), NOW(), 'e3af8953-b40f-4abd-a380-aa232fc3f67c', 'julioaugusto@gmail.com', 'Julio Augusto', '$2a$10$bHtmDusd0xrpxTN6xJyN5OvU20jMX466l6M.Gy6dtNpvmwM/O2R3m', 'ADMIN', 'COMMON');
